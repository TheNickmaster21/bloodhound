<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <script src="/resources/jquery-3.3.1.js"></script>
    <link rel="stylesheet" href="/resources/bootstrap-4.0.0-dist/css/bootstrap.min.css"/>
    <script src="/resources/popper.min.js"></script>
    <script src="/resources/vue.js"></script>
    <script src="/resources/underscore.js"></script>
    <link href="/resources/open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
    <script src="/resources/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>

    <link href="/global.css" rel="stylesheet">
</head>
<body>
<div class="popupBody" id="ruleset-page">
    <header>
        <a href="/index.html">
            <span class="oi oi-home"></span>
        </a>
        <h3>
            <span>Rule Sets</span>
        </h3>
    </header>

    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="rulesets-dropdown-rule"
                data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
            Select Rule Set
        </button>

        <div class="dropdown-menu" aria-labelledby="rulesets-dropdown-rule">
            <a v-for="option in ruleSetOptions" class="dropdown-item"
               href="#!" v-on:click="selectRuleSetOption(option)">{{option.name || "No Name"}}</a>
        </div>
    </div>

    <button class="btn btn-primary" v-on:click="newRuleSet()">New</button>

    <div v-if="selectedRuleSetOption">
        Name: <input v-model="selectedRuleSetOption.name">
        <button class="btn btn-primary" v-on:click="newRule()">New Rule</button>
        <div>
            <button class="btn btn-primary" v-on:click="prevRule()">Prev</button>
            Rule ({{ruleIndex + 1}}/{{selectedRuleSetOption.rules.length}})
            <button class="btn btn-primary" v-on:click="nextRule()">Next</button>
            <h4>{{selectedRuleSetOption.rules[ruleIndex].elements }} {{selectedRuleSetOption.rules[ruleIndex].id}}</h4>
            <input v-model="userText">&nbsp;<button class="btn" v-on:click="updateMatchedTokens()">Find</button>

            <p v-for="token in matchedTokens">
                <strong>{{token.innerText}}</strong> <!-- - {{token.elements}}-->
                <button v-on:click="pickToken(token.id)">Select</button>
            </p>
        </div>
        <button class="btn btn-secondary" v-on:click="save()">Save</button>
    </div>
</div>
<script src="ruleSetController.js"></script>
</body>
</html>